!function(e,t){"use strict";"function"==typeof define&&define.amd?define(t):"object"==typeof module&&module.exports?module.exports=t():e.log=t()}(this,function(){"use strict";function r(t,e){var n=t[e];if("function"==typeof n.bind)return n.bind(t);try{return Function.prototype.bind.call(n,t)}catch(e){return function(){return Function.prototype.apply.apply(n,[t,arguments])}}}function u(e,t){for(var n=0;n<c.length;n++){var o=c[n];this[o]=n<e?a:this.methodFactory(o,e,t)}}function s(e,t,n){return o=e,typeof console!==p&&(void 0!==console[o]?r(console,o):void 0!==console.log?r(console,"log"):a)||function(e,t,n){return function(){typeof console!==p&&(u.call(this,t,n),this[e].apply(this,arguments))}}.apply(this,arguments);var o}function t(n,e,t){function o(){var e;try{e=window.localStorage[i]}catch(e){}if(typeof e===p)try{var t=window.document.cookie,n=t.indexOf(encodeURIComponent(i)+"=");n&&(e=/^([^;]+)/.exec(t.slice(n))[1])}catch(e){}return void 0===a.levels[e]&&(e=void 0),e}var r,a=this,i="loglevel";n&&(i+=":"+n),a.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},a.methodFactory=t||s,a.getLevel=function(){return r},a.setLevel=function(e,t){if("string"==typeof e&&void 0!==a.levels[e.toUpperCase()]&&(e=a.levels[e.toUpperCase()]),!("number"==typeof e&&0<=e&&e<=a.levels.SILENT))throw"log.setLevel() called with invalid level: "+e;return r=e,!1!==t&&function(e){var t=(c[e]||"silent").toUpperCase();try{return window.localStorage[i]=t}catch(e){}try{window.document.cookie=encodeURIComponent(i)+"="+t+";"}catch(e){}}(e),u.call(a,e,n),typeof console===p&&e<a.levels.SILENT?"No console available for logging":void 0},a.setDefaultLevel=function(e){o()||a.setLevel(e,!1)},a.enableAll=function(e){a.setLevel(a.levels.TRACE,e)},a.disableAll=function(e){a.setLevel(a.levels.SILENT,e)};var l=o();null==l&&(l=null==e?"WARN":e),a.setLevel(l,!1)}var a=function(){},p="undefined",c=["trace","debug","info","warn","error"],n=new t,o={};n.getLogger=function(e){if("string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");return o[e]||(o[e]=new t(e,n.getLevel(),n.methodFactory))};var e=typeof window!==p?window.log:void 0;return n.noConflict=function(){return typeof window!==p&&window.log===n&&(window.log=e),n},n});var __escapeHTML=function(e){return e?("string"!=typeof e&&(e=e.toString()),e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")):""},__unescapeHTML=function(e){return e?("string"!=typeof e&&(e=e.toString()),e.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&apos;/g,"'")):""};!function(){"use strict";var I,L,D,S,O,r,a,h=(I=/[\s\n]/,L=/[\s\n]/g,D=/<\/?(?:[A-Za-z]+\w*)|<!--/,S=/(?:(?:&(?:amp|gt|lt|nbsp|quot|apos|#39);)|'|"|\\|\n)/g,O={"&amp;":"&","&gt;":">","&lt;":"<","&nbsp;":" ","&quot;":'\\"',"&apos;":"\\'","&#39;":"\\'","'":"\\'","\\":"\\\\",'"':'\\"',"\n":"\\n"},function(e){for(var t=e.length,n=[],o=0;o<t;)if("<"===(a=e[o]))if(o++,"!--"===e.substring(o,o+3)){o+=3;var r=e.indexOf("--\x3e",o),o=-1===r?t:r+3}else{var a,i={type:"Tag",value:""},l="",u={},s=!1,p=!1;for("/"===(a=e[o])&&(a=e[++o],s=!0);o<t&&">"!==a&&"/"!==a&&!1===I.test(a);)l+=a,a=e[++o];for(;o<t&&">"!==a&&("/"!==a||">"!==e[o+1]);)if(!0===I.test(a))a=e[++o];else{for(var c="",f="";o<t&&"="!==a&&!1===I.test(a)&&">"!==a&&("/"!==a||">"!==e[o+1]);)c+=a,a=e[++o];if("="===a){var g=" ",v=!1,d=0;for('"'!==(a=e[++o])&&"'"!==a&&" "!==a&&"\n"!==a&&"{"!==a||(g=(v="{"===a)?"}":a,a=e[++o]),v&&(f+="{");o<t&&">"!==a&&("/"!==a||">"!==e[o+1]);){if((!v||v&&d<=0)&&a===g){v&&(f+="}"),a=e[++o];break}f+=a,"{"===a?d++:"}"===a&&d--,a=e[++o]}}var m={name:c,value:__unescapeHTML(f),argument:void 0,data:{}},h=c.split(":");2===h.length&&(m.name=h[0],m.argument=h[1]),u[c]=m}"/"===a?(o+=2,p=!0):o++,i.value=l,i.attributes=u,i.closeStart=s,i.closeEnd=p,n.push(i)}else{var y,w=e.substring(o),b=w.search(D);-1===b?(y=w,o=t):(y=w.substring(0,b),o+=b),0!==y.replace(L,"").length&&n.push({type:"Text",value:y.replace(S,function(e){return O[e]})})}return n}),y=(r={},a={start:"<%",end:"%>"},function e(t,n){var o=/\W/.test(t)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};obj = obj || {};with(obj){p.push('"+t.replace(/[\r\t\n]/g," ").replace(new RegExp("'(?=[^"+a.end.substr(0,1)+"]*"+a.end+")","g"),"\t").split("'").join("\\'").replace(new RegExp("={(.+?(}+)?)}","g"),"=',__6oz.registerData($1),'").split("\t").join("'").replace(new RegExp(a.start+":(.+?)"+a.end,"g"),"',__escapeHTML($1),'").replace(new RegExp(a.start+"=(.+?)"+a.end,"g"),"',$1,'").split(a.start).join("');").split(a.end).join("p.push('")+"');}return p.join('');"):r[t]=r[t]||e(document.getElementById(t).innerHTML);return n?o(n):o}),w=/^on[a-z]+$/i,b=/^props$/i,T="__data",C=">>[6oz.js] ",e={},E=log.getLogger("6oz logger"),_={},x={},N={};function j(e,t,n){for(var o,r=[],a=0,i=!1,l=0,u=e.length;l<u;l++){var s,p=e[l],c=p.type,f=p.value,g=(o=f)&&-1<o.indexOf("-"),v=p.attributes&&p.attributes["skip-node"]&&"true"==p.attributes["skip-node"].value,d=function(e,t,n){var o=function(e,t,n){if(!e)return!1;var o,r=e.attributes,a=[],i=e.closeEnd?"elementVoid":"elementOpen",l=null;if(0<Object.keys(r).length)for(var u in r){var s,p,c=r[u],f=c.name,g=c.value.replace(/(?:\r\n|\r|\n)/g,""),v=w.test(f),d=b.test(f);"key-id"!=f.toLowerCase()?(a.push(JSON.stringify(c.name)),v?"function"==typeof function(e,t){if(-1==t.indexOf("."))return e[t];for(var n=t.split("."),o=e,r=!0,a=0,i=n.length;a<i;a++){var l=o[n[a]];if(!l){r=!1;break}o=l}return r?o:void 0}(t,g)?a.push(n+"."+g):(E.warn(C+"Could not find the function "+g+" so event was not bound."),a.pop()):d?(N.attributeProps||(N.attributeProps={}),s=JSON.stringify(c.value),(p=/\{([a-zA-Z0-9\-]+)\}/.exec(g))&&1<p.length&&(p=p[1],N.attributeProps[p]=x[p],s=T+".attributeProps['"+p+"']"),a.push(s)):a.push(JSON.stringify(g))):l=JSON.stringify(g)}return o=0<a.length?","+a.join(","):"",{elementType:i,tagAttributesString:o,elementKeyID:l}}(e,t,n);return o.elementKeyID=null==o.elementKeyID?"null":JSON.stringify(o.elementKeyID),o};if("ComponentStart"==c)N[p.attributes.componentID]=t,r.push("(function (o) {");else if("ComponentEnd"==c)r.push("})("+T+'["'+p.attributes.componentID+'"]);');else if("Tag"==c)if(p.closeStart||!v||i)if(p.closeStart&&!g)0==a--&&(i=!1),i||r.push('IncrementalDOM.elementClose("'+f+'");');else if(g&&!i){var m=function(e){var t=e.value.toLowerCase(),n=_[t];if(!n)return!1;var o,r=e.attributes,a={};for(var i in r){var l,u=r[i].value,s=function(e){return e&&/^\{(.*)\}$/.exec(e)}(u);s&&1<s.length&&s[1]?(l=s[1],a[i]=x[l]):a[i]=u}var p={props:a};void 0!==n.controller&&(o=new n.controller(a),p.controller=o);var c=y(n.template,p),f=h(c),g=M();for(var v in f.unshift({type:"ComponentStart",attributes:{componentID:g}}),f.push({type:"ComponentEnd",attributes:{componentID:g}}),a.props={},a)a.props[v]=a[v];void 0!==o&&(a.controller=o);return j(f,a,"o")}(p);if(!1===m)continue;r=r.concat(m)}else g||(a++,i||(s=d(p,t,n),r.push("IncrementalDOM."+s.elementType+'("'+f+'",'+s.elementKeyID+",null"+s.tagAttributesString+");")));else s=d(p,t,n),r.push("IncrementalDOM."+s.elementType+'("'+f+'",'+s.elementKeyID+",null"+s.tagAttributesString+");"),r.push("IncrementalDOM.skip();"),i=!0,a=0;else"Text"!=c||i||r.push('IncrementalDOM.text("'+f.replace(/(?:\r\n|\r|\n)/g,"")+'");')}return r}function M(){function e(){return(65536*(1+Math.random())|0).toString(16).substring(1)}return(e()+e()+"-"+e()+"-4"+e().substr(0,3)+"-"+e()+"-"+e()+e()+e()).toLowerCase()}e.applyToDOM=function t(n,o,e){var r=y(o,e.data),a=j(h(r),e.functions,T+".__fn"),i=new Function(T,a.join(""));return N.__fn=e.functions,IncrementalDOM.patch(n,i,N),x={},N={},{update:function(e){t(n,o,e)}}},e.addComponent=function(e){if(!(e=e||{}).componentName||!e.template)return E.warn(C+"You must provide a componentName and template."),!1;var t,n=e.componentName.toLowerCase(),o=e.controller;if(/-[a-zA-Z0-9]+[^-]?$/.test(n)){if(!_[n])return void 0!==o&&"function"==typeof o&&(t=o),_[n]={template:e.template,controller:t},!0;E.warn(C+"A component with name "+n+" has already been added.")}else E.warn(C+"You must provide a valid component name ["+n+"].  It must be kebab case, must contain at least one hyphen, and must not end with a hyphen.")},e.registerData=function(e){var t=M();return x[t]=e,"{"+t+"}"},window.__6oz=e,IncrementalDOM.attributes.props=function(e,t,n){e[t]=n}}();